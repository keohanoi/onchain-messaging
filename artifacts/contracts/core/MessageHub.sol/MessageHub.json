{
  "_format": "hh-sol-artifact-1",
  "contractName": "MessageHub",
  "sourceName": "contracts/core/MessageHub.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "verifierAddress",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "groupId",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "commitment",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "bytes",
          "name": "encryptedMetadata",
          "type": "bytes"
        },
        {
          "indexed": false,
          "internalType": "bytes",
          "name": "zkProof",
          "type": "bytes"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "nullifier",
          "type": "bytes32"
        }
      ],
      "name": "GroupMessagePosted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "commitment",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "stealthRecipient",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "bytes",
          "name": "ephemeralPubKey",
          "type": "bytes"
        },
        {
          "indexed": false,
          "internalType": "bytes1",
          "name": "viewTag",
          "type": "bytes1"
        },
        {
          "indexed": false,
          "internalType": "bytes",
          "name": "encryptedMetadata",
          "type": "bytes"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "nullifier",
          "type": "bytes32"
        }
      ],
      "name": "MessagePosted",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "commitmentTimestamp",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes1",
          "name": "viewTag",
          "type": "bytes1"
        }
      ],
      "name": "getMessagesByViewTag",
      "outputs": [
        {
          "internalType": "uint256[]",
          "name": "",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "nullifier",
          "type": "bytes32"
        }
      ],
      "name": "isNullifierUsed",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes1",
          "name": "",
          "type": "bytes1"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "messagesByViewTag",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "stealthRecipient",
          "type": "address"
        },
        {
          "internalType": "bytes",
          "name": "ephemeralPubKey",
          "type": "bytes"
        },
        {
          "internalType": "bytes1",
          "name": "viewTag",
          "type": "bytes1"
        },
        {
          "internalType": "bytes",
          "name": "encryptedMetadata",
          "type": "bytes"
        },
        {
          "internalType": "bytes32",
          "name": "nullifier",
          "type": "bytes32"
        }
      ],
      "name": "postDirectMessage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address[]",
          "name": "stealthRecipients",
          "type": "address[]"
        },
        {
          "internalType": "bytes[]",
          "name": "ephemeralPubKeys",
          "type": "bytes[]"
        },
        {
          "internalType": "bytes1[]",
          "name": "viewTags",
          "type": "bytes1[]"
        },
        {
          "internalType": "bytes[]",
          "name": "encryptedMetadatas",
          "type": "bytes[]"
        },
        {
          "internalType": "bytes32[]",
          "name": "nullifiers",
          "type": "bytes32[]"
        }
      ],
      "name": "postDirectMessageBatch",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "groupId",
          "type": "bytes32"
        },
        {
          "internalType": "bytes",
          "name": "encryptedMetadata",
          "type": "bytes"
        },
        {
          "internalType": "bytes",
          "name": "zkProof",
          "type": "bytes"
        },
        {
          "internalType": "bytes32",
          "name": "nullifier",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "merkleRoot",
          "type": "bytes32"
        }
      ],
      "name": "postGroupMessage",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "totalMessages",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "usedNullifiers",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "verifier",
      "outputs": [
        {
          "internalType": "contract IZKVerifier",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x60803461007457601f610ba838819003918201601f19168301916001600160401b038311848410176100795780849260209460405283398101031261007457516001600160a01b0381169081900361007457600480546001600160a01b031916919091179055604051610b1890816100908239f35b600080fd5b634e487b7160e01b600052604160045260246000fdfe6080604081815260048036101561001557600080fd5b600092833560e01c908163206137aa146107dc5750806322dc7b4c146107b15780632b7ac3f31461078a57806376989a72146104ef5783816383649c63146103be5750806383711df314610310578063951166c0146102f1578063b899e9b514610297578063d4e81b83146100bd5763fb6162b01461009357600080fd5b346100b95760203660031901126100b95760209282913581526001845220549051908152f35b8280fd5b509190346102935760a036600319011261029357823567ffffffffffffffff60243581811161028f576100f3903690870161083f565b909160443590811161028b5761010c903690880161083f565b60649591953590818852602098888a5261012c60ff858b205416156108b2565b61015d8a8960018060a01b038454168751808095819463fb8f16fb60e01b8352608089840152896084840191610a19565b60843560248301528d604483015289606483015203915afa908115610281578a91610247575b50156102145750879861020a91837f15920d6fb18e6d69dfb1e81b124c94477372d54a2bca92e37920f95bc5e0f2fb98999a528a8252848b20600160ff198254161790556101d2368789610973565b828151910120996101e46003546109f4565b6003556101fd865198899860608a5260608a0191610a19565b9287840390880152610a19565b918301520390a380f35b835162461bcd60e51b81529081018a9052600d60248201526c24b73b30b634b210383937b7b360991b6044820152606490fd5b90508a81813d831161027a575b61025e818361093b565b81010312610276575180151581036102765738610183565b8980fd5b503d610254565b85513d8c823e3d90fd5b8580fd5b8480fd5b5080fd5b5050346102935780600319360112610293576102b161086d565b6001600160f81b03191682526002602052808220805460243593908410156102ee57506020926102e091610884565b91905490519160031b1c8152f35b80fd5b5050346102935781600319360112610293576020906003549051908152f35b8284346102ee57602090816003193601126102ee5782906001600160f81b031961033861086d565b16815260028352818120908251808584549182815201908194845286842090845b8181106103aa575050508161036f91038261093b565b83519485948186019282875251809352850193925b82811061039357505050500390f35b835185528695509381019392810192600101610384565b825484529288019260019283019201610359565b919050346102935760a03660031901126102935780356001600160a01b03811693908490036100b95767ffffffffffffffff60243581811161028f57610407903690850161083f565b9290916044359460ff60f81b86168087036104eb576064359283116104eb577f4f8d47bde0b0002726791070bd985462a30a10fca5fdf7aad758a033055994de966104e59461045d6104cd948b9636910161083f565b94909361047a60ff84608435998a815280602052205416156108b2565b61048660218b146108ef565b868c528b602052828c20600160ff19825416179055826104a7368888610973565b602081519101209c8d8152600160205242828220556003549281526002602052206109ba565b6104d86003546109f4565b6003555196879687610a3a565b0390a380f35b8780fd5b5090346100b95760a03660031901126100b95767ffffffffffffffff91803583811161028f576105229036908301610809565b9190936024358181116107865761053c9036908401610809565b604495919535838111610782576105569036908601610809565b94909360643581811161077e576105709036908401610809565b909160843590811161077a576105899036908501610809565b949093818a1480610771575b80610768575b8061075f575b1561072a57508b805b8a81106105b5575080f35b8c818c8c8f8c878f92868f8f92828e6105cf828588610a7b565b35875260209e8f528787205460ff16156105e8906108b2565b6105f192610a8b565b6105fe91506021146108ef565b61060792610a7b565b358152808952818120805460ff191660019081179091559861062a878d8f610a8b565b369061063592610973565b818151910120998a8352815242838320556003948554948860ff60f81b9261065c92610a7b565b61066590610acd565b168252600290522090610677916109ba565b8054610682906109f4565b905561068d92610a7b565b356001600160a01b038116908190036107265761071f927f4f8d47bde0b0002726791070bd985462a30a10fca5fdf7aad758a033055994de8c8f6107178d8f928d8f9161070b8f918f8f610703918f936106f8856106f08180966106fd95610a8b565b9f909e610a7b565b610acd565b95610a8b565b959094610a7b565b35935196879687610a3a565b0390a36109f4565b8c906105aa565b8e80fd5b606490602088519162461bcd60e51b8352820152600f60248201526e098cadccee8d040dad2e6dac2e8c6d608b1b6044820152fd5b508583146105a1565b5082891461059b565b50888214610595565b8b80fd5b8a80fd5b8880fd5b8680fd5b50346100b957826003193601126100b9575490516001600160a01b03909116815260209150f35b50346100b95760203660031901126100b9578160209360ff9235815280855220541690519015158152f35b929190503461080557602036600319011261080557358352602083815292205460ff1615158152f35b8380fd5b9181601f8401121561083a5782359167ffffffffffffffff831161083a576020808501948460051b01011161083a57565b600080fd5b9181601f8401121561083a5782359167ffffffffffffffff831161083a576020838186019501011161083a57565b600435906001600160f81b03198216820361083a57565b805482101561089c5760005260206000200190600090565b634e487b7160e01b600052603260045260246000fd5b156108b957565b60405162461bcd60e51b815260206004820152600e60248201526d139d5b1b1a599a595c881d5cd95960921b6044820152606490fd5b156108f657565b60405162461bcd60e51b815260206004820152601c60248201527f496e76616c696420657068656d6572616c206b6579206c656e677468000000006044820152606490fd5b90601f8019910116810190811067ffffffffffffffff82111761095d57604052565b634e487b7160e01b600052604160045260246000fd5b92919267ffffffffffffffff821161095d576040519161099d601f8201601f19166020018461093b565b82948184528183011161083a578281602093846000960137010152565b80546801000000000000000081101561095d576109dc91600182018155610884565b819291549060031b91821b91600019901b1916179055565b6000198114610a035760010190565b634e487b7160e01b600052601160045260246000fd5b908060209392818452848401376000828201840152601f01601f1916010190565b9695949093610a58606095610a76959460808b5260808b0191610a19565b6001600160f81b031990931660208901528783036040890152610a19565b930152565b919081101561089c5760051b0190565b919081101561089c5760051b81013590601e198136030182121561083a57019081359167ffffffffffffffff831161083a57602001823603811361083a579190565b356001600160f81b03198116810361083a579056fea26469706673582212204f5b9ff681b276d786cd7c977aadd96c6fc32bbeba1cdcef0762f290c3170d0464736f6c63430008140033",
  "deployedBytecode": "0x6080604081815260048036101561001557600080fd5b600092833560e01c908163206137aa146107dc5750806322dc7b4c146107b15780632b7ac3f31461078a57806376989a72146104ef5783816383649c63146103be5750806383711df314610310578063951166c0146102f1578063b899e9b514610297578063d4e81b83146100bd5763fb6162b01461009357600080fd5b346100b95760203660031901126100b95760209282913581526001845220549051908152f35b8280fd5b509190346102935760a036600319011261029357823567ffffffffffffffff60243581811161028f576100f3903690870161083f565b909160443590811161028b5761010c903690880161083f565b60649591953590818852602098888a5261012c60ff858b205416156108b2565b61015d8a8960018060a01b038454168751808095819463fb8f16fb60e01b8352608089840152896084840191610a19565b60843560248301528d604483015289606483015203915afa908115610281578a91610247575b50156102145750879861020a91837f15920d6fb18e6d69dfb1e81b124c94477372d54a2bca92e37920f95bc5e0f2fb98999a528a8252848b20600160ff198254161790556101d2368789610973565b828151910120996101e46003546109f4565b6003556101fd865198899860608a5260608a0191610a19565b9287840390880152610a19565b918301520390a380f35b835162461bcd60e51b81529081018a9052600d60248201526c24b73b30b634b210383937b7b360991b6044820152606490fd5b90508a81813d831161027a575b61025e818361093b565b81010312610276575180151581036102765738610183565b8980fd5b503d610254565b85513d8c823e3d90fd5b8580fd5b8480fd5b5080fd5b5050346102935780600319360112610293576102b161086d565b6001600160f81b03191682526002602052808220805460243593908410156102ee57506020926102e091610884565b91905490519160031b1c8152f35b80fd5b5050346102935781600319360112610293576020906003549051908152f35b8284346102ee57602090816003193601126102ee5782906001600160f81b031961033861086d565b16815260028352818120908251808584549182815201908194845286842090845b8181106103aa575050508161036f91038261093b565b83519485948186019282875251809352850193925b82811061039357505050500390f35b835185528695509381019392810192600101610384565b825484529288019260019283019201610359565b919050346102935760a03660031901126102935780356001600160a01b03811693908490036100b95767ffffffffffffffff60243581811161028f57610407903690850161083f565b9290916044359460ff60f81b86168087036104eb576064359283116104eb577f4f8d47bde0b0002726791070bd985462a30a10fca5fdf7aad758a033055994de966104e59461045d6104cd948b9636910161083f565b94909361047a60ff84608435998a815280602052205416156108b2565b61048660218b146108ef565b868c528b602052828c20600160ff19825416179055826104a7368888610973565b602081519101209c8d8152600160205242828220556003549281526002602052206109ba565b6104d86003546109f4565b6003555196879687610a3a565b0390a380f35b8780fd5b5090346100b95760a03660031901126100b95767ffffffffffffffff91803583811161028f576105229036908301610809565b9190936024358181116107865761053c9036908401610809565b604495919535838111610782576105569036908601610809565b94909360643581811161077e576105709036908401610809565b909160843590811161077a576105899036908501610809565b949093818a1480610771575b80610768575b8061075f575b1561072a57508b805b8a81106105b5575080f35b8c818c8c8f8c878f92868f8f92828e6105cf828588610a7b565b35875260209e8f528787205460ff16156105e8906108b2565b6105f192610a8b565b6105fe91506021146108ef565b61060792610a7b565b358152808952818120805460ff191660019081179091559861062a878d8f610a8b565b369061063592610973565b818151910120998a8352815242838320556003948554948860ff60f81b9261065c92610a7b565b61066590610acd565b168252600290522090610677916109ba565b8054610682906109f4565b905561068d92610a7b565b356001600160a01b038116908190036107265761071f927f4f8d47bde0b0002726791070bd985462a30a10fca5fdf7aad758a033055994de8c8f6107178d8f928d8f9161070b8f918f8f610703918f936106f8856106f08180966106fd95610a8b565b9f909e610a7b565b610acd565b95610a8b565b959094610a7b565b35935196879687610a3a565b0390a36109f4565b8c906105aa565b8e80fd5b606490602088519162461bcd60e51b8352820152600f60248201526e098cadccee8d040dad2e6dac2e8c6d608b1b6044820152fd5b508583146105a1565b5082891461059b565b50888214610595565b8b80fd5b8a80fd5b8880fd5b8680fd5b50346100b957826003193601126100b9575490516001600160a01b03909116815260209150f35b50346100b95760203660031901126100b9578160209360ff9235815280855220541690519015158152f35b929190503461080557602036600319011261080557358352602083815292205460ff1615158152f35b8380fd5b9181601f8401121561083a5782359167ffffffffffffffff831161083a576020808501948460051b01011161083a57565b600080fd5b9181601f8401121561083a5782359167ffffffffffffffff831161083a576020838186019501011161083a57565b600435906001600160f81b03198216820361083a57565b805482101561089c5760005260206000200190600090565b634e487b7160e01b600052603260045260246000fd5b156108b957565b60405162461bcd60e51b815260206004820152600e60248201526d139d5b1b1a599a595c881d5cd95960921b6044820152606490fd5b156108f657565b60405162461bcd60e51b815260206004820152601c60248201527f496e76616c696420657068656d6572616c206b6579206c656e677468000000006044820152606490fd5b90601f8019910116810190811067ffffffffffffffff82111761095d57604052565b634e487b7160e01b600052604160045260246000fd5b92919267ffffffffffffffff821161095d576040519161099d601f8201601f19166020018461093b565b82948184528183011161083a578281602093846000960137010152565b80546801000000000000000081101561095d576109dc91600182018155610884565b819291549060031b91821b91600019901b1916179055565b6000198114610a035760010190565b634e487b7160e01b600052601160045260246000fd5b908060209392818452848401376000828201840152601f01601f1916010190565b9695949093610a58606095610a76959460808b5260808b0191610a19565b6001600160f81b031990931660208901528783036040890152610a19565b930152565b919081101561089c5760051b0190565b919081101561089c5760051b81013590601e198136030182121561083a57019081359167ffffffffffffffff831161083a57602001823603811361083a579190565b356001600160f81b03198116810361083a579056fea26469706673582212204f5b9ff681b276d786cd7c977aadd96c6fc32bbeba1cdcef0762f290c3170d0464736f6c63430008140033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
